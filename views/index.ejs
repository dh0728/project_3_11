<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="/css/index.css">
  <link rel="stylesheet" href="/css/menu_button.css">
  <script src="https://kit.fontawesome.com/fccb424d55.js" crossorigin="anonymous"></script>
</head>

<body>
  <div id="container">
    <img class="logo" src="/src/logo.png" alt="로고">
    <div id="name">FOLLOW ME</div>
    <div id="logout">
      <a id="logout_btn" href="/logout">로그아웃</a>
    </div>
  </div>

  <hr>
  <% for (let i=0; i <showdb.length; i++) { %>
    <div class="post" id="<%= showdb[i]._id %>">
      <h2>
        <div class="postIdFollow">
          <div class="userid">
            <%= showdb[i].userid %>
          </div>
          <form id="<%= showdb[i].userid %>" action="/home?_method=PUT" method="POST">
            <% if (following.includes(showdb[i].userid)) { %>
              <button class="btn_follow followed" name="following" value="<%= showdb[i]._id %>" disabled>팔로잉</button>
              <% } else {%>
                <button class="btn_follow" name="following" value="<%= showdb[i]._id %>">팔로우</button>
                <% }%>
          </form>
        </div>
      </h2>

      <div class="carouselBox">
        <div class="carousel" data-id="<%=showdb[i].postImage.length %>">
          <% for (let j=0; j<showdb[i].postImage.length; j++) { %>
            <img class="cell" src="/image/<%=showdb[i].postImage[j] %>">
            <% } %>
        </div>
      </div>
      <div style="display: flex; justify-content: space-around">
        <div style="cursor:pointer; border-radius: 5px; border:1px solid black; display:inline-block; text-align: center; margin : 0px; padding: 5px;
        background-color: #8FB996; width: 70px; color: white;"
          class="prev-button<%= i %>" s>이전</div>
        <div style="cursor:pointer; border-radius: 5px; border:1px solid black; display:inline-block; text-align: center; margin : 0px; padding: 5px;
        background-color: #8FB996; width: 70px; color: white;"
          class="next-button<%= i %>">다음</div>
      </div>

      <div class="postHeart">
        <form action="/home/good?_method=PUT" method="POST">
          <% if (showdb[i].goodList.includes(id)) { %>
            <button class="btn_good liked" name="postname" value="<%= showdb[i]._id %>" disabled>
              <i class="fa-solid fa-heart">
                <% } else { %>
                  <button class="btn_good" name="postname" value="<%= showdb[i]._id %>">
                    <i class="fa-regular fa-heart">
                      <% } %>
                        <%= showdb[i].goodList.length %>
                    </i>
                  </button>
        </form>
      </div>

      <div id="text_container">
        <%= showdb[i].postText %>
      </div>


      <!-- <div id="btn">
        <div id="butn">
          <button type="button" onclick="showPreviousImage()">&lt;</button>
          <button type="button" onclick="showNextImage()">&gt;</button>
        </div>
      </div> -->
    </div>
    <% } %>

      <div class="button-container">
        <button><a href="http://localhost:3000/home/" target="myframe">피드페이지</a></button>
        <button><a href="http://localhost:3000/home/upload" target="myframe">업로드</a></button>
        <button><a href="http://localhost:3000/home/mypage" target="myframe">마이페이지</a></button>
      </div>
      <script src="/js/home.js" defer>
      </script>

</body>

</html>